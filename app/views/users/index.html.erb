<div class="container">
  <h1 class="thin">Lista de usuarios</h1>
  <div class="row">
    <div class="col s9">
      <table class="striped">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Birthdate</th>
            <th>Edad</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= user.nombre %> <%= user.apellido_paterno %> <%= user.apellido_materno %></td>
              <td><%= user.birthdate.strftime("%d/%m/%Y")  %></td>
              <td><%= Time.now.utc.to_date.year - user.birthdate.year - ((Time.now.utc.to_date.month > user.birthdate.month || (Time.now.utc.to_date.month == user.birthdate.month && Time.now.utc.to_date.day >= user.birthdate.day)) ? 0 : 1)%></td>
              <td><%= link_to 'Ver', user , class: "btn waves-effect waves-light blue lighten-1 btn-small" %></td>
              <td><%= link_to 'Editar', edit_user_path(user) , class: "btn waves-effect waves-light btn-small" %></td>
              <td><%= link_to 'Eliminar', user, method: :delete, data: { confirm: 'Are you sure?' } , class: "btn waves-effect waves-light red darken-1 btn-small" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <br>

  <%= link_to 'Crear usuario', new_user_path %>
</div>